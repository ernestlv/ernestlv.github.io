<!DOCTYPE html>
<html>
<head>
	<meta name="keywords" content="ernesto, ernest, ernee, ernie, leyva, ernestolv, ernestlv, eleyva, vazquez, atomictumato, tumato, html, css, javascript, responsive, design, cranford, mexico, line-height, blog">
	<meta name="description" content="ernest's blog line-height">
	<meta name="author" content="Ernest Leyva">
	<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1, user-scalable=0"/> <!-- prevent zoom, keep portrait & landscape consistante, trigger media queries -->
	<meta name="p:domain_verify" content="fdefe289722ab1afdebfc185109f7e01"/><!-- pinterest -->
	<title>The Line Box Blues By Ernest</title>
	<link href='https://fonts.googleapis.com/css?family=Roboto:400,100,900' rel='stylesheet' type='text/css'>
	<link rel="stylesheet" type="text/css" href="/css/ripples.css">
	<!--[if lte IE 8]>
		<link rel="stylesheet" type="text/css" href="css/ripplesold.css">
	<![endif]-->
	<style>
		.container header figure {
			width:25%;
			float: right;
		}
		.container header figure figcaption {
			font-size: 0.5em;
		}
		.container {
			text-align: left;
			width: 70%;
		}

		.container h1 {
			text-align: center
		}

		.container h1 b {
			vertical-align: super;
		}

		.container h2 {
			margin: 2.5em 0;
		}
		.container p b {
			color: #000;
			font-size: 1em;
		    letter-spacing: normal;
		    top: 0;
		    font-weight: 100;
		}

		.container ul, ol {
			line-height: 2.5em;
		    font-size: 1.2rem;
		    font-weight: 100;
		}

		.container ul b, ol b{
			font-weight: 400;
		}

		.container .note {
			font-size: 0.8em;
		}

		.container figure {
			margin: 2.5em auto;
			width: 100%;
			float: none;
		}

		.container figure figcaption {
			line-height: 2em;
		    font-size: 1rem;
		    font-weight: 100;
			text-align: left;
		}

		.container figure figcaption b {
			font-weight: 400;
		}

		.container .leading span, .container .line-height span {
			padding-left: 3em;
			font-weight: 400;
		}

		.container .leading .up {
			vertical-align: 4px;
    		font-size: .8em;
    		font-weight: 400;
		}

		.container .leading .dn {
    		font-size: 0.8em;
    		font-weight: 400;
		}

		.container figure.small img {
		    width: 70%;
		}

		.container .example {
			font-weight: 400;
			width: 70%;
			margin-left: auto;
			margin-right: auto;
		}

		.container .example span {
			color: hsl(0, 50%, 50%);
		}

		header .content {
			height: 10rem; 
			width: 20rem; 
			background: hsla(0, 70%, 50%, 1.3); 
			border-bottom-right-radius: 0.5rem; 
			text-align: center;
		}

		header .title {
			font-weight: 900; 
			font-size: 4em;
		}

		header .title b:nth-child(1) {
			margin-right: -0.9rem;
    		font-size: 1.5em;
		}

		header .title b:nth-child(2){
			vertical-align: -1.4rem;
		}

		header .title span {
			font-weight: 100; 
			font-size: 0.9rem; 
			float: right;
    		margin-right: 1rem;
		}

		footer .content {
			font-size:.9em; 
			background:hsla(200, 10%, 85%, 0.3); 
			padding: 0 2em; 
			font-weight: 100;
    		line-height: 2.5em;
    		height: 2.5em;
		}

		footer .left {
			float:left;
		}

		footer .right {
			float:right;
		}

		@media (max-width: 46em){
			.container header figure {
			    display: none;
			}

			.container h2 {
			    margin: 1.5em 0;
			}

			.container ul, .container ol {
			    font-family: sans-serif;
			    font-size: 1em;
			    line-height: 2.2em;
			}

			.container figure figcaption {
				font-family: sans-serif;
			    font-size: 0.8em;
			}

			.container figure.small img {
			    width: 100%;
			}
			header .content{
				border-radius: 0;
				width: auto;
			}
		}

		@media (max-width: 30em){

			.container {
				width: 90%;
			}

			.container p {
			    margin: 1em 0em;
			    text-align: justify;
			}

			.container figure figcaption {
			    text-align: justify;
			}

		}

	</style>
</head>
<body>
   <article>
   		<header>
   				<div class="content">
   					<div class="title"><b>T</b>he B<b>LOG</b> <a href="mailto:ernestolv@hotmail.com" re="author"><span>by ernest</span></a></div>
     			</div>
   		</header>
	   <div class="container">
	   		<header>
		   		<h1>THE LINE BOX BLUES</h1>
		   	   <figure>
			   		<img src="/blog/img/tree.jpg" alt="header tree">
			   		<figcaption>source: <a href="//thegraphicsfairy.com">thegraphicsfairy.com</a></figcaption>
			   	</figure>
		   	</header>
			<section>
				<h2>THE BASELINE</h2>
				<p>"...<i>The baseline is an invisible line onto which all type characters sit, although of course some characters (including 'j', 'p', 'g' and 'y') have descenders that hang below the baseline</i>..."</p>

				<p class="note">Source: <a href="//stuffandnonsense.co.uk/blog/about/improve_your_web_typography_with_baseline_shift">stuffandnonsense.co.uk</a></p>

				<figure>
			   		<img src="/blog/img/lh-1.png" alt="the baseline">
			   		<figcaption><b>Figure 1</b>: The baseline where font sits.</figcaption>
			   	</figure>

			</section>
			<section>
				<h2>THE LINE BOX</h2>
				<p>"...<i>The rectangular area that contains the boxes [characters] that form a line is called a line box</i>..."
				<br>
				"...<i>The width of a line box is determined by a containing block and the presence of floats. The height of a line box is determined by the rules given in the section on <a href="#line-height">line height calculations</a></i>..."</p>

				<p class="note">source: <a href="//www.w3.org/TR/CSS2/visuren.html#line-box">W3C CSS Level 2 spec</a></p>

				<p>A Line box houses inline elements (e.g. text) and they are nested in block elements. It stretches to the width of the block element. Line boxes stack upon each other within the block element, leaving no gaps.</p>

				<figure>
			   		<img src="/blog/img/lh-2.png" alt="the line box">
			   		<figcaption><b>Figure 2</b>: Two stacked line boxes hosting inline elements bound by red borders.</figcaption>
			   	</figure>

			   	<p>A line box will make all baselines to stack at regular intervals, this is called <a href="//webtypography.net/2.2.2">vertical rhythm</a>.</p>
				
				<p>Four CSS properties are important for line boxes:</p>

				<ul>
					<li><a href="#">font-size</a>: Defines the size of an inline element.</li>
					<li><a href="//developer.mozilla.org/en-US/docs/Web/CSS/line-height">line-height</a>: Defines the height of an inline element.</li>
					<li><a href="//developer.mozilla.org/en-US/docs/Web/CSS/vertical-align">vertical-align</a>: Vertically position an inline element using its baseline.</li>
					<li><a href="//developer.mozilla.org/en-US/docs/Web/CSS/text-align">text-align</a>: Horizontally position inline elements within the line box.</li>
				</ul>
				<p>The first three: <em>font-size</em>, <em>line-height</em> & <em>vertical-align</em> are used to calculate the line box height.</p>
			</section>
			<section>
				<h2 id="line-height">THE LINE-HEIGHT</h2>
				<p class="line-height">The <em>line-height</em> is just an absolute number defined in pixels, ems, rems or %:
				<br>
				<span>line-height: 2px</span>
				<br>
				or it can also be a relative number multiplied by the current font-size. i.e.:
				<br>
				<span>line-height: 2 </span>
				<br>
				The <em>line-height</em> represents the height for each individual <em>inline</em> element ( just as <em>height + padding + border + margin</em> represents the height for inline-block elements ). The browser uses the <em>line-height</em> to calculate the <em>leading</em>. In typography the leading is the space above and below a glyph and represent the total height of an inline element. The browser uses the <a href="#leading">half-leading</a> technique to determine this space.</p>
				
				<h3>HALF-LEADING</h3>

				<p>A browser calculates the height for each inline element like this:</p>

				<ol class="leading">
					<li>
						First calculates the font metrics:<br>
						<span>AD = A+D</span>
						<br>
						where:
						<br>
						<span>A: is the height above the baseline.</span>
						<br>
						<span>D: is the depth beneath the baseline.</span>
					</li>
					<li>
						Second calculates the leading:<br>
						<span>L = line-height - AD</span>
					</li>
					<li>
						Third calculates the half-leading:<br>
						<span>A' = A + <b class="up">L</b>/<b class="dn">2</b></span>
						<br>
						<span>D' = D + <b class="up">L</b>/<b class="dn">2</b></span>
					</li>
					<li>
						Fourth calculates the inline element total height:<br>
						<span>L' = A' + D'</span>
						<br>
						where:
						<br>
						<span>L': is line-height but including font metrics</span>
					</li>
				</ol>

				<p class="note">source: <a href="//www.w3.org/TR/CSS2/visudet.html#line-height">W3C Level 2 line-height calculations</a></p>

				<figure>
			   		<img src="/blog/img/lh-5.png" alt="half-leading">
			   		<figcaption><b>Figure 3</b>: A simplify picture, of the half-leading process, is just to split the line-height in two. The first half would be above the midline, the second half would be below. inline elements would cluster close to the midline.</figcaption>
			   	</figure>

			   	<p>The browser needs to caulculate the height of each inline element to determine the line box height.</p>

				<h3>LINE BOX HEIGHT</h3>

				<p>To calculate the height of the line box, where inline elements are placed, the browser follows these steps:</p>

				<ol>
					<li>First calculate the height of each inline element, using the <a href="#leading">half-leading technique</a>.</li>
					<li>Second position each inline element using its <a href="#vertical-align">vertical-align</a>.</li>
					<li>Third calculate the line box height as the distance between the uppermost top and lowermost bottom among all inline elements.</li>
				</ol>

			</section>
			<section>
				<h2 id="vertical-align">VERTICAL-ALIGMENT</h2>

				<p>First of all a line box has five axes:</p>

				<ul>
					<li><b>Top</b> : upper edge of the line box.</li>
					<li><b>topline</b> : upper edge of the x-height.</li>
					<li><b>midline</b> : midpoint of the x-height.</li>
					<li><b>baseline</b> : bottom edge of the x-height.</li>
					<li><b>Bottom</b> : bottom edge of the line box.</li>
				</ul>

				<p class="note">note: The above might not be accurate but is a good approximation that helped me to understand the vertical-align property.</p>

				<figure class="small">
			   		<img src="/blog/img/lh-6.png" alt="line box axes">
			   		<figcaption><b>Figure 4</b>: Shows the line box edges and the top, mid and baselines.</figcaption>
			   	</figure>

				<p>vertical-align is all about shiftting the baseline of inline elements relative to the lines in the line box.</p>

				<p>Imaging an inline element ( e.g. letter '<b>a</b>' )  and the x-height, vertical-align will position the inline element like this:</p>

				<ul>
					<li><b>baseline</b>: Shifts the baseline of '<b>a</b>', relative to the baseline of x-height, zero pixels.
						<figure class="small">
					   		<img src="/blog/img/lh-61.png" alt="vertical-align super">
					   		<figcaption><b>Figure 5</b>: vertical-align: baseline. '<b>a</b>' baseline is not shifted.</figcaption>
					   	</figure>
					</li>
					<li><b>super</b>: Shifts the baseline of '<b>a</b>' above the mid-line of the x-height. This would expand the line box height, if '<b>a</b>' becomes the uppermost top.
						<figure class="small">
					   		<img src="/blog/img/lh-7.png" alt="vertical-align super">
					   		<figcaption><b>Figure 6</b>: vertical-align: super. '<b>a</b>' baseline is shifted above midline of x-height, line box height is expanded accordingly.</figcaption>
					   	</figure>
					</li>
					<li><b>sub</b>: Shifts the baseline of '<b>a</b>' to the bottom of the x-height baseline depth. This will expand the line box height, if '<b>a</b>' becomes the lowermost bottom.
						<figure class="small">
					   		<img src="/blog/img/lh-8.png" alt="vertical-align sub">
					   		<figcaption><b>Figure 7</b>: vertical-align: sub. '<b>a</b>' baseline is shifted to sit on  bottom of x-height baseline depth. Line box height is also expanded accordingly.</figcaption>
					   	</figure>
					</li>
					<li><b>middle</b>: Shifts the baseline of '<b>a</b>' in such a way that is always close to the midline of the x-height. This will expand the line box height, if '<b>a</b>' becomes the uppermost / lowermost top / bottom.
						<figure class="small">
					   		<img src="/blog/img/lh-8a.png" alt="vertical-align middle">
					   		<figcaption><b>Figure 8</b>: vertical-align: middle. '<b>a</b>' baseline is shifted, so '<b>a</b>' is always close to the midline of x-height. Line box height was expanded to the line-height of the largest '<b>a</b>'.</figcaption>
					   	</figure>
					</li>
					<li><b>length</b>: Shifts the baseline of '<b>a</b>' the specified amount of units ( px, em, % ). Line box height will be expanded accordingly to the uppermost / lowermost top / bottom.</li>
					<li><b>top</b>: Shifts the top of '<b>a</b>' to the top of the line box.</li>
					<li><b>bottom</b>: Shifts the bottom of '<b>a</b>' to the bottom of the line box.</li>
					<li><b>text-top</b>: Shifts the top of '<b>a</b>' to the top of the content area.</li>
					<li><b>text-bottom</b>: Shifts the bottom of '<b>a</b>' to the bottom of the content area.</li>
				</ul>
			</section>
			<section>
				<h2>FLOATS</h2>
				<p>A float removes an inline element from its line box and shifts the element left or right, relative to the  line box, then <em>creates a new line box, to align the  inline elements in the float, i.e. floats do not share baselines</em>. Additionally the surrounding line boxes width is adjusted, so their content does not overlap the float.</p>
				<figure>
			   		<img src="/blog/img/lh-10.png" alt="floats">
			   		<figcaption><b>Figure 9</b>: Two floats 'left | right' running on the same line box.</figcaption>
			   	</figure>
			   	<p>Note that If the line box, containg a float, is splitted into a stack of line boxes, floats belonging to the splitted line box will be pushed down to the next line box in the stack.</p>
			   	<p class="example">EX: Figure 9, line box, above, would be splitted like:<br>
				   	
				   	<span>[left]</span> x a b c d f<br>
				   	
				   	z k d p g r w o <span>[right]</span><br>
				   	
			   	</p>

			   	<p>We can split a line box in two ways. manually with a <b>&lt;br&gt;</b> or automatically collapsing the content area of its container block</p>
			</section>
			<section>
				<h2>THE INLINE-BLOCK PECULIARITY</h2>
				<p>An inline-block element has two heights! One is the <u>content area height</u>, defined by the CSS property <b>height</b>. The other the <u>line box height</u>, defined by the CSS property <b>line-height</b>. The browser will use the content height to paint the content area box, absolute position elements, apply padding, borders and margins but will use the line-height to calculate the baseline and position inline content ( e.g. text/img ) thru vertical-align and text-align.</p>

				<figure>
			   		<img src="/blog/img/lh-3.png" alt="content area half">
			   		<figcaption><b>Figure 10</b>: The contented area height, here painted in light blue, can be smaller than the line box.</figcaption>
			   	</figure>

			   	<figure>
			   		<img src="/blog/img/lh-4.png" alt="content area bleeding">
			   		<figcaption><b>Figure 11</b>: The content area height can also be larger than the line box and it "bleeds" out.</figcaption>
			   	</figure>

			   	<p class="note">Source: <a href="//www.w3.org/TR/CSS2/visudet.html#inline-box-height">W3C Level 2 inline-box-height</a></p>

			   	<p class="note">See also: <a href="//www.w3.org/TR/CSS2/visudet.html#inline-non-replaced">W3C Level 2 inline element height</a></p>

			   	<h3>FLOATS & BLOCKS PECULIARITY</h3>
			   	<p>If a block element contains a single float, as the floated content is removed from its single line box and shifted left or right, the line box contains no more inline elements, therefore its line-height and content area height are collapsed to <em>zero</em> and all block elements beneath will be shifted up. The width of the line boxes, belonging to the shifted blocks, will be adjusted so content does not overlaps the float.</p>

			   	<figure>
			   		<img src="/blog/img/lh-11.png" alt="blocks with float stacked up">
			   		<figcaption><b>Figure 12</b>: Two block elements, stacked together, the upper block contains a float and its content area was manually stretched, using css height for this example.</figcaption>
			   	</figure>

			   	<figure>
			   		<img src="/blog/img/lh-12.png" alt="blocks with float collapsed">
			   		<figcaption><b>Figure 13</b>: Two block elements, collaped together. Since we did not manually tamper with the upper block CSS height, its content area and line box were collapsed when its only content was floated right. The lower block was shifted up and its line box splitted in two, so inline content does not overlap floated content.</figcaption>
			   	</figure>

			</section>
			<section>
				<h2>REFERENCE</h2>
				<ol>
					<li><a href="//stuffandnonsense.co.uk/blog/about/improve_your_web_typography_with_baseline_shift">Improve your web typography with baseline shift</a></li>
					<li><a href="//www.fonts.com/content/learning/fyti/using-type-tools/baseline-shift">Baseline Shift</a></li>
					<li><a href="//www.w3.org/TR/CSS2/visuren.html#line-box">W3C Level 2 Spec Line Boxes</a></li>
					<li><a href="//designmodo.com/typography-basics/">Typography Basics: Understand the Language of Letters</a></li>
				</ol>
			</section>
	   </div>
   </article>
   <footer>
		<div class="content">
		 		<div class="left">may / 2016</div>
		 		<div class="right"><a href="mailto:ernestolv@hotmail.com" re="me">come on! comment</a></div>
		</div>
	</footer>
	<script>
	  (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
	  (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
	  m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
	  })(window,document,'script','https://www.google-analytics.com/analytics.js','ga');

	  ga('create', 'UA-77251791-1', 'auto');
	  ga('send', 'pageview');
	</script>
</body>
</html>

<!DOCTYPE html>
<html>
<head>
	<meta name="keywords" content="ernesto, ernest, ernee, ernie, leyva, ernestolv, ernestlv, eleyva, vazquez, atomictumato, tumato, html, css, javascript, responsive, design, cranford, mexico, line-height, blog">
	<meta name="description" content="ernest's blog line-height">
	<meta name="author" content="Ernest Leyva">
	<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1, user-scalable=0"/> <!-- prevent zoom, keep portrait & landscape consistante, trigger media queries -->
	<meta name="p:domain_verify" content="fdefe289722ab1afdebfc185109f7e01"/><!-- pinterest -->
	<title>The Line Box Blues By Ernest</title>
	<link href='https://fonts.googleapis.com/css?family=Roboto:400,100,900' rel='stylesheet' type='text/css'>
	<link rel="stylesheet" type="text/css" href="/css/ripples.css">
	<!--[if lte IE 8]>
		<link rel="stylesheet" type="text/css" href="css/ripplesold.css">
	<![endif]-->
	<style>
		.container header figure {
			width:25%; margin: 0 auto;
		}
		.container header figure figcaption {
			font-size: 0.5em;
		}
		.container {
			text-align: left;
			width: 70%;
		}

		.container h1 {
			text-align: center
		}

		.container h1 b {
			vertical-align: super;
		}

		.container h2 {
			margin-top: 4em;
		}
		.container p b {
			color: #000;
			font-size: 1em;
		    letter-spacing: normal;
		    top: 0;
		    font-weight: 100;
		}

		.container ul, ol {
			line-height: 2.5em;
		    font-size: 1.2rem;
		    font-weight: 100;
		}

		.container ul b, ol b{
			font-weight: 400;
		}

		.container .note {
			font-size: 0.8em;
		}

		.container figure {
			margin: 2em auto 3em auto;
			width: 100%;
			float: none;
		}

		.container figure figcaption {
			line-height: 2em;
		    font-size: 1rem;
		    font-weight: 100;
			text-align: left;
			padding: none;
		}

		.container figure figcaption b {
			font-weight: 400;
		}

		.container p.leading span, .container p.line-height span {
			padding-left: 3em;
			font-weight: 400;
		}

		.container p.leading .up {
			vertical-align: 4px;
    		font-size: .8em;
    		font-weight: 400;
		}

		.container p.leading .dn {
    		font-size: 0.8em;
    		font-weight: 400;
		}

	</style>
</head>
<body>
   <article>
   		<header>
   			<div style="position:relative">
   				<div style="height: 10rem; width: 20rem; background: hsla(0, 70%, 50%, 1.3); border-bottom-right-radius: 0.5rem; text-align: center;">
   					<div class="title" style="font-weight: 900; font-size: 4em;"><span style="margin-right: -0.9rem;
    font-size: 1.5em">T</span>he B<span style="vertical-align: -1.4rem">LOG</span> <span style="font-weight: 100; font-size: 0.5rem; float: right;
    margin-right: 1rem;
}" >by ernest</span></div>
     			</div>
   			</div>
   		</header>
	   <div class="container">
	   		<header>
		   		<h1>THE LINE BOX BLUES</h1>
		   	   <figure>
			   		<img src="//thegraphicsfairy.com/wp-content/uploads/2013/06/Free-Vintage-Tree-Image-GraphicsFairy.jpg" alt="header tree">
			   		<figcaption>source: <a href="//thegraphicsfairy.com">thegraphicsfairy.com</a></figcaption>
			   	</figure>
		   	</header>
			<section>
				<h2>THE BASELINE</h2>
				<p>"...<i>The baseline is an invisible line onto which all type characters sit, although of course some characters (including 'j', 'p', 'g' and 'y') have descenders that hang below the baseline</i>..."</p>

				<p class="note">Source: <a href="//stuffandnonsense.co.uk/blog/about/improve_your_web_typography_with_baseline_shift">stuffandnonsense.co.uk</a></p>

				<figure>
			   		<img src="/blog/img/lh-1.png" alt="the baseline">
			   		<figcaption><b>Figure 1</b>: The baseline where font sits.</figcaption>
			   	</figure>

			</section>
			<section>
				<h2>THE LINE BOX</h2>
				<p>"...<i>The rectangular area that contains the boxes [charactes] that form a line is called a line box</i>..."
				<br>
				"...<i>The width of a line box is determined by a containing block and the presence of floats. The height of a line box is determined by the rules given in the section on <a href="#line-height">line height calculations</a></i>..."</p>

				<p class="note">source: <a href="//www.w3.org/TR/CSS2/visuren.html#line-box">W3C CSS Level 2 spec</a></p>

				<p>A Line box houses inline elements (e.g. text) and they are nested in block elements. It stretches to the width of the block element. Line boxes stack upon each other within the block element, leaving no gaps.</p>

				<figure>
			   		<img src="/blog/img/lh-2.png" alt="the line box">
			   		<figcaption><b>Figure 2</b>: Two stacked line boxes hosting inline elements bound by red borders.</figcaption>
			   	</figure>

			   	<p>A line box will make all baselines to stack at regular intervals, this is called <a href="//webtypography.net/2.2.2">vertical rhythm</a>.</p>
				
				<p>Four CSS properties are important for line boxes:</p>

				<ul>
					<li><a href="#">font-size</a>: Defines the size of an inline element font.</li>
					<li><a href="//developer.mozilla.org/en-US/docs/Web/CSS/line-height">line-height</a>: Defines the height of an inline element.</li>
					<li><a href="//developer.mozilla.org/en-US/docs/Web/CSS/vertical-align">vertical-align</a>: Controls how to vertically position an inline element based on its baseline.</li>
					<li><a href="//developer.mozilla.org/en-US/docs/Web/CSS/text-align">text-align</a>: Controls how to horizontally position inline elements within the line box.</li>
				</ul>
				<p>The first three, <em>font-size</em>, <em>line-height</em>, <em>vertical-align</em>, are used to calculate the line box. height</p>
			</section>
			<section>
				<h2 id="line-height">THE LINE-HEIGHT</h2>
				<p class="line-height">The <em>line-height</em> is just an absolute number defined in pixels, ems, rems or percentage or it can be a relative number multiplied by the current font-size:
				<br>
				<span>line-height: 2px</span>
				<br>
				<span>line-height: 2 &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;// i.e. current font * 2</span>
				<br>
				The <em>line-height</em> represents the height for each individual <em>inline</em> element ( just as <em>height + padding + border + margin</em> is the height for inline-block element ). The browser uses the <em>line-height</em> to calculate the <em>leading</em>. In typography the leading is the space above and below a glyph and represent the total height of an inline element. The browser uses the half-leading technique to determine this space.</p>
				<h3>HALF-LEADING</h3>
				<p class="leading">
					The browser calculates the height of each inline element, using the <em>leading</em> like this:
					<br>
					- First the browser calculates the size of each inline element:<br>
					<span>AD = A+D</span>
					<br>
					where:
					<br>
					<span>A: is the height above the baseline.</span>
					<br>
					<span>D: is the depth beneath the baseline.</span>
					<br>
					- Second calculates the Leading:
					<br>
					<span>L = line-height - AD</span>
					<br>
					- Third calculates the half-leading:
					<br>
					<span>A' = A + <b class="up">L</b>/<b class="dn">2</b></span>
					<br>
					<span>D' = D + <b class="up">L</b>/<b class="dn">2</b></span>
					<br>
					- Fourth calculates the inline element total height:
					<br>
					<span>L' = A' + D'</span>
					<br>
					The browser needs to caulculate the height of each inline element to determine the line box height.
				</p>

				<h3>LINE BOX HEIGHT</h3>
				<p>To calculate the height of the line box, where inline elements are placed, the browser follows these steps:<br>
					- First calculate the height of each inline element, using the <a href="#leading">half-leading technique</a>.<br>
					- Second position each inline element using its <a href="#vertical-align">vertical-align</a>.<br>
					- Third calculate the line box height as the distance between the upper most top and lower most bottom among all inline elements.
				</p>

				<p class="note">source: <a href="//www.w3.org/TR/CSS2/visudet.html#line-height">W3C Level 2 line-height calculations</a></p>

				<figure>
			   		<img src="/blog/img/lh-5.png" alt="half-leading">
			   		<figcaption><b>Figure 5</b>: A simplify way to picture, the half-leading process, is just split the line-height in two. The upper half would be above the midline, the lower half would be below. inline elements hang close to the midline.</figcaption>
			   	</figure>

				<p class="note">see also: <a href="//www.w3.org/TR/CSS2/visudet.html#inline-non-replaced">W3C Level 2 inline element height</a></p>
			</section>
			<section>
				<h2 id="vertical-align">VERTICAL-ALIGMENT</h2>

				<p>First of all a line box has five axes:</p>

				<ul>
					<li><b>Top</b> : upper edge of the line box.</li>
					<li><b>top-line</b> : upper edge of a letter x.</li>
					<li><b>mid-line</b> : midpoint of a letter x.</li>
					<li><b>baseline</b> : bottom edge of a letter x.</li>
					<li><b>Bottom</b> : bottom edge of the line box.</li>
				</ul>

				<p class="note">note: The above might not be accurate but is a good approximation that helped me to understand the vertical-align property.</p>

				<figure>
			   		<img src="/blog/img/lh-6.png" alt="line box axes" style="width:70%">
			   		<figcaption><b>Figure 6</b>: Shows the line box edges and the top, mid and baselines.</figcaption>
			   	</figure>

				<p>vertical-align is all about shiftting the baseline of inline elements relative to the lines mentioned above.</p>

				<p>Imaging two inline elements  a letter 'x' and a lower 'a', vertical-align will position them like this:</p>

				<ul>
					<li><b>baseline</b>: Shifts the baseline of 'a' zero pixels.
						<figure>
					   		<img src="/blog/img/lh-61.png" style="width:70%" alt="vertical-align super">
					   		<figcaption><b>Figure 6b</b>: vertical-align: baseline. 'a' baseline is shifted zero px relative to x-height baseline.</figcaption>
					   	</figure>
					</li>
					<li><b>super</b>: Shifts the baseline of 'a' above the mid-line of the x-height. This would expand the line box height if 'a' becomes the uppermost top.
						<figure>
					   		<img src="/blog/img/lh-7.png" style="width:70%" alt="vertical-align super">
					   		<figcaption><b>Figure 7</b>: vertical-align: super. 'a' baseline is shifted above midline of x-height, line box height is expanded accordingly.</figcaption>
					   	</figure>
					</li>
					<li><b>sub</b>: Shifts the baseline of 'a' to the Bottom of the baseline depth. This will expand the line box height if 'a' becomes the lowermost bottom.
						<figure>
					   		<img src="/blog/img/lh-8.png" style="width:70%" alt="vertical-align sub">
					   		<figcaption><b>Figure 8</b>: vertical-align: sub. 'a' baseline is shifted to sit on  bottom of x-height baseline depth. Line box height is also expanded accordingly.</figcaption>
					   	</figure>
					</li>
					<li><b>middle</b>: Shifts the baseline of 'a' in such a way that is always aligned with the midline of the x-height. This will expand the line box height if 'a' becomes the uppermost / lowermost top / bottom.
						<figure>
					   		<img src="/blog/img/lh-8a.png" style="width:70%" alt="vertical-align middle">
					   		<figcaption><b>Figure 8</b>: vertical-align: middle. 'a' baseline is shifted so is aligned with midline of x-height. Line box height was expanded to the line-height of the largest 'a'.</figcaption>
					   	</figure>
					</li>
					<li><b>length</b>: Shifts the baseline of 'a' the specified amount of units ( px, em, % ). Line box height will be expanded accordingly to the uppermost / lowermost top / bottom.</li>
					<li><b>top</b>: Shifts the top of the x to the Top of the line box.</li>
					<li><b>bottom</b>: Shifts the bottom of the x to the Bottom of the line box.</li>
					<li><b>text-top</b>: Shifts the top of the X to the top of the content area.</li>
					<li><b>text-bottom</b>: Shifts the top of the X to the bottom of the content area.</li>
				</ul>
			</section>
			<section>
				<h2>FLOATS</h2>
				<p>A float removes an inline element from its line box and shifts the element left or right, relative to the original line box then creates a new line box for the floated element, i.e. floats do not share baselines. The original line box wdith is then adjusted so its content does not overlap the float. if new line boxes are stacked in the content area, floats do not stay fux they are pushed to the next line box then floated again.</p>
				<figure>
			   		<img src="/blog/img/lh-10.png" alt="floats">
			   		<figcaption><b>Figure 10</b>: Two floats 'left | right' running on the same line box.</figcaption>
			   	</figure>
			</section>
			<section>
				<h2>THE INLINE-BLOCK PECULIARITY</h2>
				<p>Note that an inline-block element has two heights! One is the <u>content area height</u>, defined by the CSS property <b>height</b>. The other the <u>line-box height</u>, defined by the CSS property <b>line-height</b>. The browser will use the content height to paint the box and apply margins, padding and borders but will use the line-height to calulate the baseline and position inline content. e.g. text.</p>

				<p class="note">Source: <a href="//www.w3.org/TR/CSS2/visudet.html#inline-box-height">W3C Level 2 inline-box-height</a></p>

				<figure>
			   		<img src="/blog/img/lh-3.png" alt="content area half">
			   		<figcaption><b>Figure 3</b>: The contented area, here painted in light blue, can be smaller than the line box.</figcaption>
			   	</figure>

			   	<figure>
			   		<img src="/blog/img/lh-4.png" alt="content area bleeding">
			   		<figcaption><b>Figure 4</b>: The content area can also be larger than the line box and it "bleeds" out.</figcaption>
			   	</figure>

			</section>
			<section>
				<h2>REFERENCE</h2>
				<ol>
					<li><a href="//stuffandnonsense.co.uk/blog/about/improve_your_web_typography_with_baseline_shift">Improve your web typography with baseline shift</a></li>
					<li><a href="//www.fonts.com/content/learning/fyti/using-type-tools/baseline-shift">Baseline Shift</a></li>
					<li><a href="//www.w3.org/TR/CSS2/visuren.html#line-box">W3C Level 2 Spec Line Boxes</a></li>
					<li><a href="//designmodo.com/typography-basics/">Typography Basics: Understand the Language of Letters</a></li>
				</ol>
			</section>
	   </div>
   </article>
   <footer>
			 <div>
			 	<p style="font-size:.9em; background:hsla(200, 10%, 85%, 0.3); padding: 0 2em; font-weight: 100;
    line-height: 2.5em;">
			 		<span style="float:left">may / 2016</span><b>&nbsp;</b><span style="float:right">ernest's blog <a href="mailto:ernestolv@hotmail.com">contact me</a></span>
			 	</p>
			 </div>
	</footer>
</body>
</html>
